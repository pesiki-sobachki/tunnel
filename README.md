# Простой обратный SSH-туннель (SSH Reverse Tunnel)

Этот проект предоставляет минималистичный и удобный скрипт для открытия публичного доступа к сервису, запущенному на вашей локальной машине, через удаленный сервер.

В отличие от аналогов (ngrok, localtunnel), это решение полностью **self-hosted**: вы используете собственный сервер и стандартные инструменты OpenSSH, сохраняя полный контроль над данными и безопасностью.

## Ключевые особенности

*   **Zero Dependencies:** Работает на чистом `ssh`. Не требует установки `autossh` или других сторонних утилит.
*   **Умная конфигурация:** Скрипт автоматически подтягивает адрес хоста, пользователя и ключи из вашего файла `~/.ssh/config`.
*   **Безопасность:** Использует аутентификацию по SSH-ключам. В инструкции описан метод ограничения прав ключа (`restrict`), чтобы туннель не мог выполнять команды на сервере.
*   **Универсальность:** Пробрасывает любой TCP-трафик (HTTP, базы данных, игры, IoT).

## Как это работает

Скрипт устанавливает обратный туннель (Reverse SSH Tunnel). Удаленный сервер начинает слушать публичный порт и перенаправляет весь входящий трафик через зашифрованный канал на вашу локальную машину.

```text
                  <-- Интернет-трафик -->
                         |
+-----------------------------------------------------------+
|                      Удаленный сервер                     |
|                                                           |
|    Файрвол          +-----------------+                   |
|       |             |   Порт :8080    |                   |
|    (Порт 80) <----->| (или любой другой) |                |
+---------------------|-----------------|-------------------+
                      |      ^
                      |      | (Весь трафик перенаправляется)
                      v      |
+-----------------------------------------------------------+
|            Обратный SSH-туннель (Зашифровано)             |
+-----------------------------------------------------------+
                      |      ^
                      |      | (Соединение инициируется отсюда)
                      v      |
+-----------------------------------------------------------+
|                      Локальная машина                     |
|                                                           |
|    +------------------------------------------------+     |
|    | Ваше приложение (веб-сервер, БД и т.д.)        |     |
|    | Слушает на localhost:3000 (или любом другом)   |     |
|    +------------------------------------------------+     |
+-----------------------------------------------------------+
```

## Частые сценарии использования

*   **Веб-разработка:** Демонстрация локального сайта заказчику ("Посмотри, как это работает у меня").
*   **Webhooks:** Тестирование интеграций (Stripe, Telegram Bots, GitHub), когда внешний сервис должен "достучаться" до вашего локального кода.
*   **Доступ к БД:** Временное открытие доступа к локальной базе данных для коллеги.

## Начало работы

Для работы скрипта требуется правильно настроенный файл `~/.ssh/config` и подготовленный сервер.

**Полная пошаговая инструкция находится в файле [INSTALL.md](INSTALL.md).**

### Быстрый старт (если SSH уже настроен)

Если у вас в `~/.ssh/config` уже есть настроенный хост (например, `my-server`), то запуск туннеля сводится к трем шагам:

1.  Откройте `start_tunnel.sh` и укажите ваш псевдоним:
    ```bash
    SSH_ALIAS="my-server"
    ```
2.  Настройте порты (какой открыть на сервере и куда вести локально):
    ```bash
    REMOTE_PORT="8080"
    LOCAL_PORT="3000"
    ```
3.  Запустите:
    ```bash
    ./start_tunnel.sh
    ```
